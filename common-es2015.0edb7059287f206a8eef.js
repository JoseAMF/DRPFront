(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[592],{85685:function(t,s,e){"use strict";e.d(s,{e:function(){return c}});var r=e(3679),o=e(99763),i=e(50016),n=e(37716);let c=(()=>{class t{constructor(t,s){this.injector=t,this.resource=s,this.serverErrorMessages=null,this.isLoading=!1,this.isNew=!1,this.route=this.injector.get(o.gz),this.router=this.injector.get(o.F0),this.formBuilder=this.injector.get(r.qu),this.toastrService=this.injector.get(i.quB)}ngOnInit(){this.setCurrentAction(),this.buildResourceForm(),this.loadResource()}ngAfterContentChecked(){this.setPageTitle()}submitForm(){this.isLoading=!0,this.isNew?this.createResource():this.updateResource()}setCurrentAction(){console.log(this.route.snapshot.url),"NEW"===this.route.snapshot.url[0].path.toUpperCase()&&(this.isNew=!0)}loadResource(){this.isNew||(this.isLoading=!0,console.log(+this.route.snapshot.paramMap.get("id")),this.getServiceCall()(+this.route.snapshot.paramMap.get("id")).subscribe(t=>{this.resource=t,this.patchDataToFomGroup(t),this.isLoading=!1},t=>alert("Ocorreu um erro no servidor, tente mais tarde.")))}patchDataToFomGroup(t){this.resourceForm.patchValue(t)}setPageTitle(){this.pageTitle=this.isNew?this.creationPageTitle():this.editionPageTitle()}creationPageTitle(){return"New"}editionPageTitle(){return this.route.snapshot.paramMap.get("id")}createResource(){const t=this.jsonDataToResourceFn(this.resourceForm.value);this.postServiceCall()(t).subscribe(()=>this.actionsForSuccess(t),t=>this.actionsForError(t))}updateResource(){const t=this.jsonDataToResourceFn(this.resourceForm.value);this.putServiceCall()(t).subscribe(()=>this.actionsForSuccess(t),t=>this.actionsForError(t))}actionsForSuccess(t){this.showToast("success",null,"Criado com sucesso"),this.navigateBack()}navigateBack(){this.router.navigate(["../list"],{relativeTo:this.route})}showToast(t,s,e){this.toastrService.show(e,s,{status:t,duration:5e3,hasIcon:!0,position:i.fe3.TOP_RIGHT,preventDuplicates:!1})}actionsForError(t){this.isLoading=!1;const s=[];try{for(const e of t.errors)for(const t of e)s.push(t)}catch(e){console.error(t),this.serverErrorMessages=["Falha na comunica\xe7\xe3o com o servidor. Por favor, tente mais tarde."]}this.serverErrorMessages=s}}return t.\u0275fac=function(t){n.$Z()},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})()},8595:function(t,s,e){"use strict";e.d(s,{d:function(){return a}});var r=e(50016),o=e(85320),i=e(70419),n=e(99763),c=e(37716);let a=(()=>{class t{constructor(t){this.injector=t,this.settings={actions:{columnTitle:"Actions",custom:[{name:"edit",title:'<i class="nb-edit"></i>'}],edit:!1,add:!1},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{}},this.source=new i.nC,this.resources=[],this.serverErrorMessages=null,this.isLoading=!1,this.dialogService=t.get(r.Gln),this.toastrService=this.injector.get(r.quB),this.router=this.injector.get(n.F0),this.route=this.injector.get(n.gz)}ngOnInit(){this.isLoading=!0,this.getServiceCall()().subscribe(t=>{this.resources=this.orderResourceList(t),this.isLoading=!1,this.source.load(this.mapResourceToSmartTable(t))},t=>{this.showToast("danger",null,"Erro ao carregar a lista"),this.isLoading=!1;const s=[];try{for(const e of t.errors)for(const t of e)s.push(t)}catch(e){console.error(t),this.serverErrorMessages=["Falha na comunica\xe7\xe3o com o servidor. Por favor, tente mais tarde."]}this.serverErrorMessages=s})}deleteResource(t){this.dialogService.open(o.z,{context:{Title:"Do you want to proceed ?",Message:"Deleted data cannot be recovered"}}).onClose.subscribe(s=>{s&&(this.isLoading=!0,this.deleteServiceCall()(this.fetchId(t)).subscribe(()=>{this.resources=this.resources.filter(s=>s!==t),this.source.load(this.mapResourceToSmartTable(this.resources)),this.isLoading=!1},t=>{this.isLoading=!1;const s=[];try{for(const e of t.errors)for(const t of e)s.push(t)}catch(e){console.error(t),this.serverErrorMessages=["Falha na comunica\xe7\xe3o com o servidor. Por favor, tente mais tarde."]}this.serverErrorMessages=s}))})}mapResourceToSmartTable(t){return t.map(t=>t)}onCustomAction(t){"edit"===t.action&&this.router.navigate(["../",t.data.id],{relativeTo:this.route})}orderResourceList(t){return t}showToast(t,s,e){this.toastrService.show(e,s,{status:t,duration:5e3,hasIcon:!0,position:r.fe3.TOP_RIGHT,preventDuplicates:!1})}}return t.\u0275fac=function(s){return new(s||t)(c.LFG(c.zs3))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac}),t})()},85320:function(t,s,e){"use strict";e.d(s,{z:function(){return a}});var r=e(37716),o=e(50016),i=e(38583);function n(t,s){if(1&t&&(r.TgZ(0,"nb-card-header"),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Oqu(t.Title)}}function c(t,s){if(1&t&&(r.TgZ(0,"nb-card-body"),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.hij(" ",t.Message," ")}}let a=(()=>{class t{constructor(t){this.ref=t}cancel(){this.ref.close(!1)}confirm(){this.ref.close(!0)}}return t.\u0275fac=function(s){return new(s||t)(r.Y36(o.X4l))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngx-confirmation-dialog"]],inputs:{Title:"Title",Message:"Message"},decls:8,vars:2,consts:[[4,"ngIf"],["status","danger",1,"btn","btn-danger",3,"click"],["status","success",1,"btn","btn-success","float-right",3,"click"]],template:function(t,s){1&t&&(r.TgZ(0,"nb-card"),r.YNc(1,n,2,1,"nb-card-header",0),r.YNc(2,c,2,1,"nb-card-body",0),r.TgZ(3,"nb-card-footer"),r.TgZ(4,"button",1),r.NdJ("click",function(){return s.cancel()}),r._uU(5,"Cancelar"),r.qZA(),r.TgZ(6,"button",2),r.NdJ("click",function(){return s.confirm()}),r._uU(7,"Confirmar"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",s.Title),r.xp6(1),r.Q6J("ngIf",s.Message))},directives:[o.Asz,i.O5,o.XWE,o.ndF,o.yKW],styles:[""]}),t})()},36987:function(t,s,e){"use strict";e.d(s,{d:function(){return a}});var r=e(37716),o=e(38583),i=e(50016);function n(t,s){if(1&t&&(r.TgZ(0,"nb-alert",2),r._uU(1),r.qZA()),2&t){const t=s.$implicit;r.xp6(1),r.Oqu(t)}}function c(t,s){if(1&t&&(r.TgZ(0,"nb-alert",3),r._uU(1),r.qZA()),2&t){const t=s.$implicit;r.xp6(1),r.hij(" ",t," ")}}let a=(()=>{class t{constructor(){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngx-page-alerts"]],inputs:{errorList:"errorList",successList:"successList"},decls:3,vars:2,consts:[["status","success",4,"ngFor","ngForOf"],["status","danger",4,"ngFor","ngForOf"],["status","success"],["status","danger"]],template:function(t,s){1&t&&(r.TgZ(0,"div"),r.YNc(1,n,2,1,"nb-alert",0),r.YNc(2,c,2,1,"nb-alert",1),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",s.successList),r.xp6(1),r.Q6J("ngForOf",s.errorList))},directives:[o.sg,i.$9b],encapsulation:2}),t})()}}]);